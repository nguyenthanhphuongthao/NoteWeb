<!DOCTYPE html>
<html lang="vn" xmlns:th="http://www.thymeleaf.org">

<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Calendar</title>

<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" type="text/css" th:href="@{/css/style.css}" />
<script src="./Calendar 04_files/s.js"></script>
<script nonce="38d556e1-81e6-44d1-95ab-27880240d471">(function (w, d) { !function (eK, eL, eM, eN) { eK.zarazData = eK.zarazData || {}; eK.zarazData.executed = []; eK.zaraz = { deferred: [], listeners: [] }; eK.zaraz.q = []; eK.zaraz._f = function (eO) { return function () { var eP = Array.prototype.slice.call(arguments); eK.zaraz.q.push({ m: eO, a: eP }) } }; for (const eQ of ["track", "set", "debug"]) eK.zaraz[eQ] = eK.zaraz._f(eQ); eK.zaraz.init = () => { var eR = eL.getElementsByTagName(eN)[0], eS = eL.createElement(eN), eT = eL.getElementsByTagName("title")[0]; eT && (eK.zarazData.t = eL.getElementsByTagName("title")[0].text); eK.zarazData.x = Math.random(); eK.zarazData.w = eK.screen.width; eK.zarazData.h = eK.screen.height; eK.zarazData.j = eK.innerHeight; eK.zarazData.e = eK.innerWidth; eK.zarazData.l = eK.location.href; eK.zarazData.r = eL.referrer; eK.zarazData.k = eK.screen.colorDepth; eK.zarazData.n = eL.characterSet; eK.zarazData.o = (new Date).getTimezoneOffset(); if (eK.dataLayer) for (const eX of Object.entries(Object.entries(dataLayer).reduce(((eY, eZ) => ({ ...eY[1], ...eZ[1] }))))) zaraz.set(eX[0], eX[1], { scope: "page" }); eK.zarazData.q = []; for (; eK.zaraz.q.length;) { const e_ = eK.zaraz.q.shift(); eK.zarazData.q.push(e_) } eS.defer = !0; for (const fa of [localStorage, sessionStorage]) Object.keys(fa || {}).filter((fc => fc.startsWith("_zaraz_"))).forEach((fb => { try { eK.zarazData["z_" + fb.slice(7)] = JSON.parse(fa.getItem(fb)) } catch { eK.zarazData["z_" + fb.slice(7)] = fa.getItem(fb) } })); eS.referrerPolicy = "origin"; eS.src = "/cdn-cgi/zaraz/s.js?z=" + btoa(encodeURIComponent(JSON.stringify(eK.zarazData))); eR.parentNode.insertBefore(eS, eR) };["complete", "interactive"].includes(eL.readyState) ? zaraz.init() : eK.addEventListener("DOMContentLoaded", zaraz.init) }(w, d, 0, "script"); })(window, document);</script>

</head>

<body>
	<section class="ftco-section">
		<div class="container">
			<div class="row justify-content-center">
				<div class="col-md-6 text-center mb-5">
					<h2 class="heading-section">Calendar</h2>
				</div>
				<div class="col-md-6 text-center mb-5">
					<h5 class="heading-section" th:text="${session.loginAccount.name}"></h5>
					<i class="fa fa-user-circle-o" aria-hidden="true"></i>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="content w-100">
						<div class="calendar-container">
							<div class="calendar">
								<div class="year-header">
									<span class="left-button fa fa-chevron-left" id="prev">
									</span> <span class="year" id="label">2006</span> <span
										class="right-button fa fa-chevron-right" id="next"> </span>

								</div>
								<table class="months-table w-100" style="width: 100%;">
									<tbody>
										<tr class="months-row">
											<td class="month active-month">Jan</td>
											<td class="month">Feb</td>
											<td class="month">Mar</td>
											<td class="month">Apr</td>
											<td class="month">May</td>
											<td class="month">Jun</td>
											<td class="month">Jul</td>
											<td class="month">Aug</td>
											<td class="month">Sep</td>
											<td class="month">Oct</td>
											<td class="month">Nov</td>
											<td class="month">Dec</td>
										</tr>
									</tbody>
								</table>
								<table class="days-table w-100" style="width: 100%;">
									<tbody>
										<tr>
											<td class="day">Sun</td>
											<td class="day">Mon</td>
											<td class="day">Tue</td>
											<td class="day">Wed</td>
											<td class="day">Thu</td>
											<td class="day">Fri</td>
											<td class="day">Sat</td>
										</tr>
									</tbody>
								</table>
								<div class="frame">
									<table class="dates-table w-100" style="width: 100%;">
										<tbody class="tbody">
											<tr class="table-row"></tr>
											<tr class="table-row">
												<td class="table-date">1</td>
												<td class="table-date">2</td>
												<td class="table-date active-date">3</td>
												<td class="table-date">4</td>
												<td class="table-date">5</td>
												<td class="table-date">6</td>
												<td class="table-date">7</td>
											</tr>
											<tr class="table-row">
												<td class="table-date">8</td>
												<td class="table-date">9</td>
												<td class="table-date">10</td>
												<td class="table-date">11</td>
												<td class="table-date">12</td>
												<td class="table-date">13</td>
												<td class="table-date">14</td>
											</tr>
											<tr class="table-row">
												<td class="table-date">15</td>
												<td class="table-date">16</td>
												<td class="table-date">17</td>
												<td class="table-date">18</td>
												<td class="table-date">19</td>
												<td class="table-date">20</td>
												<td class="table-date">21</td>
											</tr>
											<tr class="table-row">
												<td class="table-date">22</td>
												<td class="table-date">23</td>
												<td class="table-date">24</td>
												<td class="table-date">25</td>
												<td class="table-date">26</td>
												<td class="table-date">27</td>
												<td class="table-date">28</td>
											</tr>
											<tr class="table-row">
												<td class="table-date">29</td>
												<td class="table-date">30</td>
												<td class="table-date">31</td>
												<td class="table-date nil"></td>
												<td class="table-date nil"></td>
												<td class="table-date nil"></td>
												<td class="table-date nil"></td>
											</tr>
										</tbody>
									</table>
								</div>
								<button class="button" id="add-button">Tạo ghi chú</button>
							</div>
						</div>
						<div class="events-container">
							<div class="event-card"
								style="border-left: 10px; ">
								<div class="event-name">There are no events planned for
									January 3.</div>
							</div>
						</div>
						<div class="dialog" id="dialog" style="display: none;">
							<h2 class="dialog-header">Tạo ghi chú mới</h2>
							<form class="form" id="form">
								<div class="form-container" align="center">
									<label class="form-label" id="valueFromMyButton" for="name">Tiêu
										đề</label> <input class="input" type="text" id="name"> <label
										class="form-label" id="valueFromMyButton" for="count">Mô
										tả</label> <input class="input" type="text" id="count">
										<div class= "time">
										<label class="form-label" id="valueFromMyButton" for="name">Giờ bắt đầu:</label>
										<input type="time" id="time">
										<label class="form-label" id="valueFromMyButton" for="name" style="display:contents;">Giờ kết thúc:</label>
										<input type="time" id="time">
										</div> 
									<div class="btn">
										<input type="button" value="Hủy" class="button"
											id="cancel-button"> <input type="button"
											value="Tạo mới" class="button button-white" id="ok-button">
									</div>

								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>
	<script th:src="@{/js/jquery.min.js}"> </script>
	<script th:src="@{/js/popper.js}"> </script>
	<script th:src="@{/js/bootstrap.min.js}"> </script>
	<script th:src="@{/js/main.js}"> </script>


	<script>
			var returnedSuggestion = ''
			let editor, doc, cursor, line, pos
			document.addEventListener("keydown", (event) => {
				setTimeout(() => {
					editor = event.target.closest('.CodeMirror');
					if (editor) {
						doc = editor.CodeMirror.getDoc()
						cursor = doc.getCursor()
						line = doc.getLine(cursor.line)
						pos = { line: cursor.line, ch: line.length }
						if (event.key == "Enter") {
							var query = doc.getRange({ line: Math.max(0, cursor.line - 10), ch: 0 }, { line: cursor.line, ch: 0 })
							window.postMessage({ source: 'getSuggestion', payload: { data: query } })
							//displayGrey(query)
						}
						else if (event.key == "ArrowRight") {
							acceptTab(returnedSuggestion)
						}
					}
				}, 0)
			})

		function acceptTab(text) {
			if (suggestionDisplayed) {
				doc.replaceRange(text, pos)
				suggestionDisplayed = false
			}
		}
		function displayGrey(text) {
			var element = document.createElement('span')
			element.innerText = text
			element.style = 'color:grey'
			var lineIndex = pos.line;
			editor.getElementsByClassName('CodeMirror-line')[lineIndex].appendChild(element)
			suggestionDisplayed = true
		}
		window.addEventListener('message', (event) => {
			if (event.source !== window) return
			if (event.data.source == 'return') {
				returnedSuggestion = event.data.payload.data
				displayGrey(event.data.payload.data)
			}
		})
	</script>
</body>

</html>